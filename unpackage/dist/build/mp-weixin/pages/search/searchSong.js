(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/searchSong"],{"1bca":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uList:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-list/u-list")]).then(i.bind(null,"1a0f"))},uListItem:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-list-item/u-list-item")]).then(i.bind(null,"d11d"))},"u-Image":function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u--image/u--image")]).then(i.bind(null,"c361"))},"u-Text":function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u--text/u--text")]).then(i.bind(null,"7545"))},uIcon:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(i.bind(null,"a1dd"))}},o=function(){var t=this.$createElement;this._self._c},s=[]},"818c":function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("54c0");n(i("66fd"));var o=n(i("c653"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},b1b9:function(t,e,i){},c653:function(t,e,i){"use strict";i.r(e);var n=i("1bca"),o=i("fe85");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("e8ec");var c=i("f0c5"),u=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=u.exports},e8ec:function(t,e,i){"use strict";var n=i("b1b9"),o=i.n(n);o.a},fa20:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("4406"),o={props:{playerHeight:{type:Number,default:110}},data:function(){return{childCurrentMusic:-1,loadingStatus:!0,hasMore:!1,screenHeight:0,page:0,key:"海阔天空",totalSongCount:0,childSongLists:{id:"searchSong",name:"加载中...",cover:"https://p2.music.126.net/c-u3kOlkVTUf4JdeDHDdEw==/109951163291871252.jpg",updateTime:"",creator:"llgululu",cat:"",playCount:"",loveCount:"",chatCount:"",introduction:"",songsNumber:"0",music_list:[]}}},mounted:function(){this.setScorllHeight();var e=t.getStorageSync("searchKeywords")||"海阔天空";this.key=e,this.loadMore()},methods:{loadMore:function(){var t=this;n._get("/api/searchSong/getSearchSongResult",{keywords:this.key,page:this.page},(function(e){t.hasMore=e.data["data"]["songsHasMore"],t.childSongLists.songsNumber=Number(t.childSongLists.songsNumber)+Number(e.data["data"]["childSongLists"].songsNumber),t.childSongLists.music_list=t.childSongLists.music_list.concat(e.data["data"]["childSongLists"].music_list),t.totalSongCount=e.data["data"]["totalSongCount"],t.loadingStatus=!1}))},scrolltolower:function(){this.hasMore?(this.page=this.page+1,this.loadMore()):t.showToast({icon:"none",title:"到底了"})},playOneMusic:function(t){var e={id:this.childSongLists.id,songsNumber:"1",music_list:[this.childSongLists.music_list[t]]};this.$emit("playOneMusic",e)},downloadMusic:function(e){var i=this;n._get("/api/music/getMusicURLById",{id:this.childSongLists.music_list[e].music_id},(function(e){var n=t.downloadFile({url:e.data["data"]["url"],success:function(e){200===e.statusCode&&(console.log("下载成功"),t.saveFile({tempFilePath:e.tempFilePath,success:function(e){t.hideLoading(),t.showToast({icon:"success",title:"下载成功！"}),console.log("保存成功"+e.savedFilePath)}}))},fail:function(n){t.hideLoading(),t.showModal({title:"提示",content:"下载失败，可以通过浏览器链接下载，是否复制链接自行去浏览器下载？",success:function(t){t.confirm?i.copywa(e.data["data"]["url"]):t.cancel&&console.log("用户点击取消")}}),console.log(n)}});n.onProgressUpdate((function(e){t.showLoading({title:"下载进度"+e.progress+"%"}),e.progress>50&&n.abort()}))}))},copywa:function(e){t.setClipboardData({data:e,success:function(e){t.showToast({title:"复制成功"})},fail:function(){t.showToast({title:"复制失败了"})}})},collectOrCancelMusic:function(e){var i,o,s=this,c=this.childSongLists.music_list[e].music_id;this.childSongLists.music_list[e].is_like?(i="del",o=!1):(i="add",o=!0);var u=t.getStorageSync("collectionPlaylistId");n._get("/api/music/collectOrCancelMusic",{musicId:c,playlistId:u,op:i},(function(t){t.data["data"]["success"]&&(s.childSongLists.music_list[e].is_like=o)}))},setScorllHeight:function(){var e=this.playerHeight,i=t.getSystemInfoSync().statusBarHeight;this.screenHeight=t.getSystemInfoSync().windowHeight-e-i-44-t.$u.getPx(t.$u.getPx("20rpx",!0))}}};e.default=o}).call(this,i("543d")["default"])},fe85:function(t,e,i){"use strict";i.r(e);var n=i("fa20"),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a}},[["818c","common/runtime","common/vendor"]]]);